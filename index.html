<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sanestory</title>
  <style>
    :root {
      --bg-primary: #f5f3f0;
      --bg-secondary: #ffffff;
      --text-primary: #2c1810;
      --accent: #5c3a21;
      --accent-light: #8c6d5f;
      --border: #ddd;
    }
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; }
    .container { max-width: 900px; margin: 0 auto; padding: 20px; }
    header { background: var(--accent); color: white; padding: 20px 0; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    nav { display: flex; justify-content: space-between; align-items: center; max-width: 900px; margin: 0 auto; padding: 0 20px; }
    .logo { font-size: 2em; font-weight: bold; }
    .nav-links button { background: var(--accent-light); color: white; border: none; padding: 8px 15px; margin-left: 5px; border-radius: 4px; cursor: pointer; transition: background 0.3s; }
    .nav-links button:hover { background: var(--accent); }
    main { background: var(--bg-secondary); margin: 30px 0; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.05); }
    h2 { color: var(--accent); margin-bottom: 20px; padding-bottom: 10px; border-bottom: 2px solid var(--accent-light); }
    form { background: var(--bg-primary); padding: 25px; border-radius: 6px; }
    input, textarea, select { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid var(--border); border-radius: 4px; font-size: 16px; }
    button[type="submit"] { background: var(--accent); color: white; padding: 12px 30px; border: none; border-radius: 4px; font-size: 16px; cursor: pointer; }
    button[type="submit"]:hover { background: var(--accent-light); }
    .section { display: none; }
    .section.active { display: block; }
    .story-card { background: var(--bg-primary); border-left: 5px solid var(--accent-light); padding: 20px; margin: 20px 0; border-radius: 4px; }
    .story-card h3 { color: var(--accent); margin-bottom: 10px; }
    .story-meta { font-size: 0.9em; color: var(--accent-light); margin-bottom: 15px; }
    .auth-form { max-width: 400px; margin: 30px auto; background: var(--bg-secondary); padding: 25px; border-radius: 8px; }
    .error { color: #ff4444; margin-top: 10px; }
    .success { color: #44ff44; margin-top: 10px; }
    footer { text-align: center; padding: 30px; color: var(--accent-light); }
    .rules-box { background: #fff9e6; border-left: 4px solid #ffa500; padding: 20px; margin: 20px 0; }
  </style>
</head>
<body>
  <header>
    <nav>
      <div class="logo">Sanestory</div>
      <div class="nav-links">
        <button id="btn-home">Home</button>
        <button id="btn-submit">Submit</button>
        <button id="btn-browse">Browse</button>
        <button id="btn-profile">Profile</button>
        <button id="btn-auth">Sign Up</button>
      </div>
    </nav>
  </header>

  <div class="container">
    <!-- === HOME === -->
    <section id="section-home" class="section active">
      <h2>Welcome to Sanestory</h2>
      <p>A peer-driven writing community where writers share stories and give constructive feedback. No email required.</p>
      <div class="rules-box">
        <h3>How It Works:</h3>
        <ul>
          <li>‚úçÔ∏è Submit your original story</li>
          <li>üí¨ Give feedback on 2 stories for every 1 you submit</li>
          <li>ü§ù Be specific and kind in your critiques</li>
        </ul>
      </div>
    </section>

    <!-- === SUBMIT === -->
    <section id="section-submit" class="section">
      <h2>Submit Your Story</h2>
      <form action="https://formspree.io/f/YOUR_FORM_CODE" method="POST" onsubmit="return handleSubmit(event)">
        <input type="text" name="title" placeholder="Story Title" required>
        <select name="genre" required>
          <option value="">Select Genre</option>
          <option value="fiction">Fiction</option>
          <option value="mystery">Mystery</option>
          <option value="romance">Romance</option>
          <option value="scifi">Sci-Fi</option>
          <option value="horror">Horror</option>
        </select>
        <textarea name="story" placeholder="Your story (100+ words recommended)" rows="10" required></textarea>
        <input type="hidden" name="username" id="submit-user">
        <button type="submit">Submit for Feedback</button>
        <p id="submit-error" class="error"></p>
      </form>
    </section>

    <!-- === BROWSE === -->
    <section id="section-browse" class="section">
      <h2>Browse Community Stories</h2>
      <div class="story-card">
        <h3>The Clockmaker's Secret</h3>
        <div class="story-meta">Genre: Mystery | By: Sarah M. | 3 feedback comments</div>
        <p>The ticking echoed through the dusty shop. Old Man Hemlock hadn't wound the clocks in years, yet they all ran perfectly‚Äîsynced to a heartbeat that wasn't human...</p>
      </div>
      <div class="story-card">
        <h3>The Borrower</h3>
        <div class="story-meta">Genre: Fiction | By: Alex T. | 1 feedback comment</div>
        <p>Elias kept the things people left behind. The silk scarf still smelled of perfume. The leather wallet held a ticket stub. When he found the red bicycle, its basket held a note: "If you're reading this, you need it more than I do."</p>
      </div>
      <div class="story-card">
        <h3>Submit Your Story to See It Here!</h3>
        <p>Your story will appear in this gallery once you submit it.</p>
      </div>
    </section>

    <!-- === PROFILE === -->
    <section id="section-profile" class="section">
      <h2>Your Profile</h2>
      <div id="profile-content">
        <p>You are not logged in. <a href="#" onclick="showSection('register'); return false;">Create an account</a> to track your activity.</p>
      </div>
    </section>

    <!-- === REGISTER === -->
    <section id="section-register" class="section">
      <h2>Create Account</h2>
      <form class="auth-form" onsubmit="handleRegister(event)">
        <input type="text" id="reg-user" placeholder="Choose Username" required>
        <input type="password" id="reg-pass" placeholder="Choose Password" required>
        <input type="password" id="reg-confirm" placeholder="Confirm Password" required>
        <button type="submit">Sign Up</button>
        <p id="reg-error" class="error"></p>
        <p id="reg-success" class="success"></p>
      </form>
      <p style="text-align: center;">Already have an account? <a href="#" onclick="showSection('login'); return false;">Login</a></p>
    </section>

    <!-- === LOGIN === -->
    <section id="section-login" class="section">
      <h2>Login</h2>
      <form class="auth-form" onsubmit="handleLogin(event)">
        <input type="text" id="login-user" placeholder="Username" required>
        <input type="password" id="login-pass" placeholder="Password" required>
        <button type="submit">Login</button>
        <p id="login-error" class="error"></p>
      </form>
      <p style="text-align: center;">New here? <a href="#" onclick="showSection('register'); return false;">Sign up</a></p>
    </section>

    <footer>
      <p>Built for writers, by writers | Sanestory ¬© 2025</p>
    </footer>
  </div>

  <script>
    // === CORE NAVIGATION (Bulletproof) ===
    const sections = {
      'home': document.getElementById('section-home'),
      'submit': document.getElementById('section-submit'),
      'browse': document.getElementById('section-browse'),
      'profile': document.getElementById('section-profile'),
      'register': document.getElementById('section-register'),
      'login': document.getElementById('section-login')
    };
<form action="https://formspree.io/f/YOUR_FORM_CODE" method="POST" onsubmit="return handleSubmit(event)">

    function showSection(name) {
      // Hide all sections
      Object.values(sections).forEach(s => s.classList.remove('active'));
      // Show requested section
      sections[name].classList.add('active');
      console.log('Showing section:', name); // Debug
    }

    // === BUTTON EVENT LISTENERS (Works Every Time) ===
    document.getElementById('btn-home').addEventListener('click', () => showSection('home'));
    document.getElementById('btn-submit').addEventListener('click', () => showSection('submit'));
    document.getElementById('btn-browse').addEventListener('click', () => showSection('browse'));
    document.getElementById('btn-profile').addEventListener('click', () => showSection('profile'));
    document.getElementById('btn-auth').addEventListener('click', () => {
      const user = localStorage.getItem('loggedInUser');
      if (user) {
        handleLogout();
      } else {
        showSection('register');
      }
    });

    // === HANDLE SUBMIT ===
    function handleSubmit(event) {
      const user = localStorage.getItem('loggedInUser');
      if (!user) {
        document.getElementById('submit-error').textContent = 'Please sign up first!';
        showSection('register');
        event.preventDefault();
        return false;
      }
      document.getElementById('submit-user').value = user;
      return true; // Let Formspree handle it
    }

    // === HANDLE REGISTER ===
    function handleRegister(event) {
      event.preventDefault();
      const user = document.getElementById('reg-user').value;
      const pass = document.getElementById('reg-pass').value;
      const confirm = document.getElementById('reg-confirm').value;
      
      if (pass !== confirm) {
        document.getElementById('reg-error').textContent = 'Passwords do not match!';
        return;
      }
      
      if (localStorage.getItem('user_' + user)) {
        document.getElementById('reg-error').textContent = 'Username taken!';
        return;
      }
      
      localStorage.setItem('user_' + user, JSON.stringify({ password: pass, joined: new Date().toLocaleDateString() }));
      localStorage.setItem('loggedInUser', user);
      
      document.getElementById('reg-success').textContent = 'Account created! You are now logged in.';
      updateProfile();
      setTimeout(() => { showSection('home'); document.getElementById('btn-auth').textContent = 'Logout'; }, 1500);
    }

    // === HANDLE LOGIN ===
    function handleLogin(event) {
      event.preventDefault();
      const user = document.getElementById('login-user').value;
      const pass = document.getElementById('login-pass').value;
      const stored = localStorage.getItem('user_' + user);
      
      if (!stored) {
        document.getElementById('login-error').textContent = 'Username not found!';
        return;
      }
      
      const data = JSON.parse(stored);
      if (data.password !== pass) {
        document.getElementById('login-error').textContent = 'Wrong password!';
        return;
      }
      
      localStorage.setItem('loggedInUser', user);
      alert('Welcome back, ' + user + '!');
      updateProfile();
      showSection('home');
      document.getElementById('btn-auth').textContent = 'Logout';
    }

    // === HANDLE LOGOUT ===
    function handleLogout() {
      localStorage.removeItem('loggedInUser');
      document.getElementById('btn-auth').textContent = 'Sign Up';
      showSection('home');
      updateProfile();
    }

    // === UPDATE PROFILE ===
    function updateProfile() {
      const user = localStorage.getItem('loggedInUser');
      const content = document.getElementById('profile-content');
      
      if (user) {
        const data = JSON.parse(localStorage.getItem('user_' + user) || '{}');
        content.innerHTML = `
          <h3>Hello, ${user}!</h3>
          <p><strong>Member since:</strong> ${data.joined || 'Today'}</p>
          <p><strong>Stories submitted:</strong> 0 (coming soon)</p>
          <button onclick="handleLogout()">Logout</button>
        `;
      } else {
        content.innerHTML = `<p>You are not logged in. <a href="#" onclick="showSection('register'); return false;">Create an account</a>.</p>`;
      }
    }

    // === INITIALIZE ===
    updateProfile();
  </script>
</body>
</html>

      
